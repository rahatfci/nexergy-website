<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title></title>
        <link rel="stylesheet" href="main.css">
    </head>
    <body>
        <input id="searchInput" type="text" placeholder="Enter a location" />
        <div id="map" class="mapouter hidden"><div class="gmap_canvas"><iframe height="300" style="width: 100%;" id="gmap_canvas" src="https://maps.google.com/maps?q=S%20Quincy%20St,%20Arlington,%20VA%2022204,%20USA&t=&z=13&ie=UTF8&iwloc=&output=embed" frameborder="0" scrolling="no" marginheight="0" marginwidth="0"></iframe><a href="https://123movies-to.org">123movies</a><br><style>.mapouter{position:relative;text-align:right;width:100%; border: 2px solid #a9a9a9; margin-top: 20px; border-radius: 5px; padding: 10px; overflow: hidden;}</style><a href="https://www.embedgooglemap.net">google maps embed generator</a><style>.gmap_canvas {overflow:hidden;background:none!important;height:300px;width:100%;}</style></div></div>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js">
        </script>
        <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=AIzaSyByJIpkSgcLNXYfY7-w3_XYAaQgcBzGBM8&libraries=places"></script>
        <script type="text/javascript">
        
        function initAutocomplete() {
        
        let components = {
        '#street_number': 'street_number',
        '#street': 'route',
        '#city': 'locality',
        '#state': 'administrative_area_level_1',
        '#zip': 'postal_code',
        '#country': 'country'
        };
        let input = $("#searchInput")[0];
        
        let map = new google.maps.Map($("#map")[0]);
        
        let marker = new google.maps.Marker({  map: map });
        let infowindow = new google.maps.InfoWindow();
        marker.addListener("click", function () {
        infowindow.open(map, marker);
        });
        
        let autocomplete = new google.maps.places.Autocomplete(input, {
        types: ['address'],
        fields: ['place_id', 'geometry', 'address_component', 'formatted_address']
        });
        
        
        autocomplete.addListener('place_changed', () => {
        
        let place = autocomplete.getPlace();
        
        if (!place.geometry) {
        alert("No predictions were found")
        return;
        }
        
        infowindow.close();
        marker.setVisible(false);
        
        infowindow.setContent(place.formatted_address);
        
        if (place.geometry.viewport) {
        map.fitBounds(place.geometry.viewport);
        } else {
        map.setCenter(place.geometry.location);
        map.setZoom(14);
        }
        
        $.each(components, (listComponent) => {
        let addressComponent = components[listComponent];
        let matchedComponent = place.address_components.find((value, index) => {
        return value.types.some((v) => v === addressComponent );
        });
        let displayVal = matchedComponent ? matchedComponent.long_name : '-';
        $(listComponent).text(displayVal);
        });
        
        marker.addListener("click", function () {
        infowindow.open(map, marker);
        });
        
        marker.setPosition(place.geometry.location);
        marker.setVisible(true);
        $("#map").removeClass("hidden");
        
        $("#searchInput").val('');
        })
        
        };
        
        $(() => {
        initAutocomplete();
        });
        
        </script>
    </body>
</html>